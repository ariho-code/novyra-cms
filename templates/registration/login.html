{% extends "admin/base.html" %}
{% load static %}
{% load website_tags %}

{% block title %}Login - Novyra CMS{% endblock %}

{% block extrastyle %}
{{ block.super }}
{% if site_settings and site_settings.favicon|has_file %}
<link rel="icon" type="image/png" href="{{ site_settings.favicon.url }}">
{% elif site_settings and site_settings.logo|has_file %}
<link rel="icon" type="image/jpeg" href="{{ site_settings.logo.url }}">
{% else %}
<link rel="icon" type="image/jpeg" href="{% static 'novyralogo.jpg' %}">
{% endif %}
<style>
    body {
        background: linear-gradient(135deg, #0006B1 0%, #0015E8 100%);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    .login {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        padding: 3rem;
        max-width: 450px;
        margin: 5% auto;
    }
    .login h1 {
        text-align: center;
        margin-bottom: 2rem;
    }
    .login h1 img {
        height: 60px;
        margin-bottom: 1rem;
    }
    .login form {
        margin-top: 2rem;
    }
    .login input[type="text"],
    .login input[type="password"] {
        width: 100%;
        padding: 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        font-size: 1rem;
        margin-bottom: 1rem;
        transition: all 0.3s;
    }
    .login input[type="text"]:focus,
    .login input[type="password"]:focus {
        outline: none;
        border-color: #0006B1;
        box-shadow: 0 0 0 3px rgba(0, 6, 177, 0.1);
    }
    .login .submit-row {
        text-align: center;
        padding: 0;
        margin-top: 1.5rem;
    }
    .login .submit-row input {
        background: linear-gradient(135deg, #0006B1, #0015E8);
        color: white;
        padding: 1rem 3rem;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
        width: 100%;
    }
    .login .submit-row input:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(0, 6, 177, 0.4);
    }
    .login .errornote {
        background: #fee;
        border: 1px solid #fcc;
        color: #c33;
        padding: 1rem;
        border-radius: 10px;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="login">
    <h1>
        {% if site_settings and site_settings.logo|has_file %}
            <img src="{{ site_settings.logo.url }}" alt="Novyra Marketing">
        {% else %}
            <img src="{% static 'novyralogo.jpg' %}" alt="Novyra Marketing" style="height: 60px; width: auto;" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
            <span style="color: #0006B1; font-size: 2rem; font-weight: 800; display: none;">Novyra</span>
        {% endif %}
    </h1>
    
    {% if form.errors %}
    <p class="errornote">
        {% if form.errors.items|length == 1 %}Please correct the error below.{% else %}Please correct the errors below.{% endif %}
    </p>
    {% endif %}
    
    <form method="post" action="{% url 'admin:login' %}">
        {% csrf_token %}
        <div>
            <label for="id_username">Username:</label>
            <input type="text" name="username" id="id_username" required autofocus>
        </div>
        <div>
            <label for="id_password">Password:</label>
            <input type="password" name="password" id="id_password" required>
        </div>
        <input type="hidden" name="next" value="{{ next }}">
        <div class="submit-row">
            <input type="submit" value="Log in">
        </div>
    </form>
</div>
{% endblock %}

