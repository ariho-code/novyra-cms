{% extends 'base.html' %}
{% load static %}

{% block title %}Change Password - Novyra CMS{% endblock %}

{% block content %}
<div class="section" data-aos="fade-up">
    <div class="section-header">
        <h2><i class="fas fa-key"></i> Change Password</h2>
    </div>

    <div class="cms-card" style="max-width: 600px; margin: 0 auto;">
        <div style="border-bottom: 2px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 2rem;">
            <h3 style="color: var(--novyra-deep-blue); margin: 0;">Update Your Password</h3>
            <p style="color: #666; margin: 0.5rem 0 0;">Enter your current password and choose a new one</p>
        </div>

        <form method="post">
            {% csrf_token %}
            
            {% if form.errors %}
            <div style="background: #fee; border: 1px solid #fcc; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                <strong style="color: #c33;">Please correct the following errors:</strong>
                <ul style="margin: 0.5rem 0 0 1.5rem; color: #c33;">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <div class="form-group">
                <label class="form-label">{{ form.old_password.label }} *</label>
                {{ form.old_password }}
                {% if form.old_password.help_text %}
                <small style="color: #999; display: block; margin-top: 0.5rem;">{{ form.old_password.help_text }}</small>
                {% endif %}
            </div>

            <div class="form-group">
                <label class="form-label">{{ form.new_password1.label }} *</label>
                {{ form.new_password1 }}
                {% if form.new_password1.help_text %}
                <small style="color: #999; display: block; margin-top: 0.5rem;">{{ form.new_password1.help_text }}</small>
                {% endif %}
            </div>

            <div class="form-group">
                <label class="form-label">{{ form.new_password2.label }} *</label>
                {{ form.new_password2 }}
                {% if form.new_password2.help_text %}
                <small style="color: #999; display: block; margin-top: 0.5rem;">{{ form.new_password2.help_text }}</small>
                {% endif %}
            </div>

            <div style="display: flex; gap: 1rem; margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #e2e8f0;">
                <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Update Password</button>
                <a href="{% url 'accounts:profile' %}" class="btn btn-outline"><i class="fas fa-arrow-left"></i> Back to Profile</a>
            </div>
        </form>
    </div>
</div>

<style>
.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: var(--novyra-deep-blue);
}

.form-control {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 0.95rem;
    transition: var(--transition);
}

.form-control:focus {
    outline: none;
    border-color: var(--novyra-deep-blue);
    box-shadow: 0 0 0 3px rgba(0, 6, 177, 0.1);
}
</style>
{% endblock %}

